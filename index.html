<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Image Text Editor</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin-top: 20px;
        background: #f5f5f5;
    }

    canvas {
        border: 1px solid #ccc;
        margin-top: 20px;
        max-width: 90%;
        background: black;
    }

    input, button {
        margin: 5px;
        padding: 8px 12px;
        font-size: 16px;
    }

    .arrow-buttons button {
        width: 50px;
        height: 40px;
        font-size: 18px;
    }

    .size-buttons button {
        width: 50px;
        height: 40px;
        font-size: 18px;
    }
</style>
</head>
<body>

<h2>Upload Image & Adjust Text</h2>

<input type="file" id="imageUpload" accept="image/*"><br>
<input type="text" id="textInput" placeholder="Type your text here"><br>

<h3>Move Text</h3>
<div class="arrow-buttons">
    <button onclick="moveText(0,-10)">⬆</button><br>
    <button onclick="moveText(-10,0)">⬅</button>
    <button onclick="moveText(10,0)">➡</button><br>
    <button onclick="moveText(0,10)">⬇</button>
</div>

<h3>Font Size</h3>
<div class="size-buttons">
    <button onclick="changeFontSize(-5)">－</button>
    <span id="fontSizeDisplay">50</span> px
    <button onclick="changeFontSize(5)">＋</button>
</div>

<br>
<button onclick="downloadImage()">Download Image</button>

<br>
<canvas id="canvas"></canvas>

<script>
let uploadedImage = new Image();
let canvas = document.getElementById("canvas");
let ctx = canvas.getContext("2d");

let textX = 0;
let textY = 0;
let fontSize = 50;

document.getElementById("imageUpload").addEventListener("change", function(e) {
    const reader = new FileReader();
    reader.onload = function(event) {
        uploadedImage.onload = function() {
            canvas.width = uploadedImage.width;
            canvas.height = uploadedImage.height;

            textX = canvas.width * 0.75;
            textY = canvas.height * 0.5;

            drawCanvas();
        }
        uploadedImage.src = event.target.result;
    }
    reader.readAsDataURL(e.target.files[0]);
});

document.getElementById("textInput").addEventListener("input", function() {
    drawCanvas();
});

function drawCanvas() {
    if (!uploadedImage.src) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(uploadedImage, 0, 0);

    const text = document.getElementById("textInput").value;

    ctx.font = "bold " + fontSize + "px Arial";
    ctx.fillStyle = "white";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";

    ctx.fillText(text, textX, textY);
}

function moveText(dx, dy) {
    textX += dx;
    textY += dy;
    drawCanvas();
}

function changeFontSize(change) {
    fontSize += change;

    if (fontSize < 10) fontSize = 10;

    document.getElementById("fontSizeDisplay").innerText = fontSize;
    drawCanvas();
}

function downloadImage() {
    const link = document.createElement("a");
    link.download = "edited-image.png";
    link.href = canvas.toDataURL("image/png");
    link.click();
}
</script>

</body>
</html>
